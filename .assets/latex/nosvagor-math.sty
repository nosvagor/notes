% ███╗   ███╗ █████╗ ████████╗██╗  ██╗
% ████╗ ████║██╔══██╗╚══██╔══╝██║  ██║
% ██╔████╔██║███████║   ██║   ███████║
% ██║╚██╔╝██║██╔══██║   ██║   ██╔══██║
% ██║ ╚═╝ ██║██║  ██║   ██║   ██║  ██║
% ╚═╝     ╚═╝╚═╝  ╚═╝   ╚═╝   ╚═╝  ╚═╝

%  →-.   →  .-'.   →  .--.   →  .--.   →  .--.   →  .-→
% →::.\::::::::.\::::::::.\::::::::.\::::::::.\:::::::→→ → 
% → →:.\:::: https://github.com/nosvagor/notes \:::→→ →  →  → 
% →::::.\::::::::.\::::::::.\::::::::.\::::::::.\::::→  →
%   → →   `--'  →   `.-'  →   `--'  →   `--'  →   `--' →  → 

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{nosvagor-math}[My collection of math packages and commands]

% ╔═╗┌─┐┬─┐┌┬┐┌─┐┌┬┐┌┬┐┬┌┐┌┌─┐
% ╠╣ │ │├┬┘│││├─┤ │  │ │││││ ┬
% ╚  └─┘┴└─┴ ┴┴ ┴ ┴  ┴ ┴┘└┘└─┘
\RequirePackage{mathtools, amssymb, bm, relsize, esvect,tikz,tikz-cd,array,marvosym,etoolbox}
  
  \apptocmd{\lim}{\limits}{}{}

  \numberwithin{equation}{chapter}
  \DeclareMathSizes{12}{14}{10}{8}

  % Augmented Matrix [ccc|c]
  \makeatletter
      \renewcommand*\env@matrix[1][*\c@MaxMatrixCols c]{%
      \hskip -\arraycolsep
      \let\@ifnextchar\new@ifnextchar
      \array{#1}}
  \makeatother

  % Swap epsilon fonts
  \let\origVarEpsilon\varepsilon
  \renewcommand*\varepsilon{\mathlarger{\mathlarger{\mathlarger\origEpsilon}}}
  \def\dvarepsilon{\mathsmaller{\varepsilon}}

  \let\origEpsilon\epsilon
  \renewcommand*\epsilon{\mathlarger{\mathlarger{\mathlarger\origVarEpsilon}}}
  \def\depsilon{\mathsmaller{\epsilon}}
    
% ╔═╗┌─┐┌┬┐┌┬┐┌─┐┌┐┌┌┬┐┌─┐
% ║  │ │││││││├─┤│││ ││└─┐
% ╚═╝└─┘┴ ┴┴ ┴┴ ┴┘└┘─┴┘└─┘   

% Inline bold math
\newcommand{\tbm}[1]{\(\bm{#1}\)}

% Alternative Zero Font
\newcommand{\nil}{\text{\MVZero}}

% ihat, jhat, khat
\newcommand*{\ih}{
    \mbox{\fontsize{17.28}{21.6}\selectfont\(\hat{\imath}\)}}
\newcommand*{\jh}{
    \mbox{\fontsize{17.28}{21.6}\selectfont\(\hat{\jmath}\)}}
\newcommand*{\kh}{\hat{k}}

% math symbols
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\F}{\mathcal{F}}

% Operator names 
\def\med{\operatorname{med}{\hspace{-2pt}}}
\def\cov{\operatorname{cov}{\hspace{-2pt}}}
\def\sgn{\operatorname{sgn}{\hspace{-2pt}}}
\def\var{\operatorname{var}{\hspace{-2pt}}}

% Redfined with color
\let\oldcup\cup
\renewcommand{\cup}{\hspace{3pt}\fff{\oldcup}\hspace{2pt}}
\let\oldcap\cap
\renewcommand{\cap}{\hspace{3pt}\ttt{\oldcap}\hspace{2pt}}

\let\oldmin\min
\renewcommand{\min}[1]{\bbb{\oldmin\left(\fg{#1}\right)}}
\let\oldmax\max
\renewcommand{\max}[1]{\rrr{\oldmax\left(\fg{#1}\right)}}

\let\oldland\land
\renewcommand{\land}{~\ttt{\oldland}~}
\let\oldlor\lor
\renewcommand{\lor}{~\fff{\oldlor}~}

\RequirePackage{stackengine}
\renewcommand{\pm}{\mathbin{\ensurestackMath{\abovebaseline[-4pt]{%
  \stackunder[-4pt]{\color{rrr}\mathsmaller{+}}{\color{bbb}-}}}}}

% Common expressions
\newcommand{\cp}[1]{p\hspace{1pt}(H_#1~|~H_\nil)}
\def\err{\fff{\varepsilon}}
\def\y{\yyy{y}}
\def\x{\xxx{x}}
\def\fp{\emph{f'}}
\def\gp{\ppp{g'}}
\def\then{~\ssec{\Rightarrow}~}
\def\ifandif{~\ssec{\Leftrightarrow}~}
\def\gt{~\rrr{>}~}
\def\lt{~\bbb{<}~}
\def\dydx{\frac{dy}{dx}}
\newcommand{\ddx}[1]{\frac{d#1}{dx}}
\newcommand{\dd}[2]{\frac{d#1}{d#2}}


\newcommand{\thomas}[1]{\bBb{
  Thomas's Calculus\(^{14\text{\tiny{th}}}\)
  {(#1)}\small\(~^\text{\faBook}\)
  }}

% Annoying words to type
\def\hopital{L'H\^{o}pital}

% ╔═╗┬  ┌─┐┌┬┐┌─┐
% ╠═╝│  │ │ │ └─┐
% ╩  ┴─┘└─┘ ┴ └─┘
\RequirePackage{pgfplots}
  \pgfplotsset{
    compat=newest,
    xlabel={$x$}, ylabel={$y$}, 
    legend style={at={(.5,-0.25)},anchor=north},
    minor x tick num=1,
    minor y tick num=1,
  }
  
  \pgfmathdeclarefunction{CubeRoot}{1}{
    \pgfmathparse{ifthenelse(#1<0,-1,1)*exp((ln(abs(#1)))/3)}
  }